<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Debezium - Viveven</title>

		<meta name="description" content="A Docker Slide for Viveven">
		<meta name="author" content="Berke Duzgun">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
			<!-- GiriÅŸ -->
				<section>
					<a href="https://debezium.io/">
						<img src="./examples/assets/debezium-logo.png" alt="debezium logo" style="height: 180px; margin: 0 auto 4rem auto; background: transparent;" class="demo-logo">
					</a>
					<h3>Debezium Sunumu</h3>
					<p>
						<small>Created by <a href="https://www.linkedin.com/in/berkeduzgun/">Berke DÃ¼zgÃ¼n</a> </small>
					</p>
				</section>

				<section>
					<h2>Selamlar herkese</h2>
					<p>
						Debezium sunumuna hoÅŸgeldiniz
					</p>
				</section>

			<!-- TanÄ±m -->
				<section>
					<section>
						<h2>GiriÅŸ</h2>
						<p><b>CDC</b>'nin TanÄ±mÄ± ve AmacÄ±</p>
						<br>
						<a href="#/2/1" class="navigate-down">
							<img class="r-frame" style="background: rgba(255,255,255,0.1);" width="178" height="238" data-src="https://static.slid.es/reveal/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h2>Debezium Nedir Sorusundan Ã–nce <b>CDC</b> (Change Data Capture) Nedir Sorusuna Cevap ArayalÄ±m</h2>
					</section>
					<section>
						<p>Kritik verilerin bulunduÄŸu veritabanÄ± uygulamalarÄ±nda, veriler Ã¼zerindeki deÄŸiÅŸiklikleri veri gÃ¼venliÄŸi amacÄ±yla kaydetmemiz gerekir.</p>
						<p>Bunun yapÄ±lmasÄ± iÃ§in Ã§eÅŸitli yÃ¶ntemler bulunmaktadÄ±r: Tetikleyiciler(triggers), saklÄ± yordamlar(stored procedures) vb. Bu yÃ¶ntemlere ek olarak, SQL Server geliÅŸtiricileri bu yÃ¶ntemlerden daha performanslÄ± ve sisteme daha az yÃ¼k getirmek amacÄ±yla yeni bir Ã§Ã¶zÃ¼m Ã¼rettiler.</p>
					</section>
					<section>
						<p> "CDC" VeritabanÄ±nda insert, update ve delete iÅŸlemleri neticesinde nihai olarak Ã¶ncesinden farklÄ± olan, bir baÅŸka deyiÅŸle deÄŸiÅŸiklik gÃ¶steren verileri yakalamamÄ±zÄ±, izlememizi ve iÅŸlem yapabilmemizi saÄŸlayan bir tasarÄ±m modelidir.</p>
						<p> Bu model sayesinde verilerin ilk ve son hallerini elde edebilir ve tÃ¼rlÃ¼ operasyonlar gerÃ§ekleÅŸtirebiliriz. Tabi ki de CDCâ€™yi kullanabilmek iÃ§in ilgili veritabanÄ± tarafÄ±ndan destekleniyor olmasÄ± gerekmektedir.</p>
					</section>
					<!-- Bizim senaryomuzda Debezium kullancaÄŸÄ±mÄ±z iin debezzÄ±m destekleyn db ler image -->
					<section>
						<h3>Verisel deÄŸiÅŸiklikleri izleyebilmek iÃ§in trigger?? ğŸ¤”</h3>
						<p>Tabi ki de trigger ile bu iÅŸlemleri gerÃ§ekleÅŸtirebilirsiniz. Lakin CDC ile ihtiyaca dÃ¶nÃ¼k operasyonlarÄ± daha hÄ±zlÄ± bir ÅŸekilde iÅŸleyebilirsiniz. Ã‡Ã¼nkÃ¼ CDC verilere dair tÃ¼m bilgileri veritabanÄ± loglarÄ±ndan toplayarak hizmet saÄŸlamaktadÄ±r</p>
						<br/>
						<small>Bu sebepten dolayÄ± triggerâ€™lara nazaran daha performanslÄ± ve az maliyetli bir iÅŸ sÃ¼reci saÄŸlamÄ±ÅŸ bulunmaktadÄ±r. AyrÄ±ca CDC sayesinden, veritabanÄ±nda istenilen tablonun tamamÄ± yahut istek doÄŸrultusunda bir kÄ±smÄ± Ã¼zerinde yapÄ±lan deÄŸiÅŸiklikler takip edilerek sÃ¼reÃ§teki verisel akÄ±ÅŸ filtrelenebilmekte ve arzu edinildiÄŸi ÅŸekilde yÃ¶netilebilmektedir.</small>
					</section>
				</section>

				<section>
					<section>
						<h2>CDC</h2>
						<h3>Devam Edelim</h3>
						<br>
						<a href="#/2/1" class="navigate-down">
							<img class="r-frame" style="background: rgba(255,255,255,0.1);" width="178" height="238" data-src="https://static.slid.es/reveal/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h2><b>CDC</b> (Change Data Capture) Ã–zellikleri</h2>
					</section>
					<section>
						<p> CDC, kaynak sistemdeki deÄŸiÅŸiklikleri yakalayarak bu deÄŸiÅŸiklikleri hedef sistemlere aktarÄ±r. </p>
						<p>Bu sayede, farklÄ± sistemler arasÄ±nda veri entegrasyonu ve senkronizasyonu saÄŸlanÄ±r. Sistemler arasÄ±nda gÃ¼ncel ve doÄŸru veri akÄ±ÅŸÄ± elde edilir. </p>
					</section>
					<section>
						<h3>CDC, veritabanÄ±ndaki deÄŸiÅŸiklikleri gerÃ§ek zamanlÄ± olarak takip eder ve hedef sistemlere anÄ±nda aktarÄ±r. Bu sayede, veri entegrasyonu sÃ¼reci hÄ±zlanÄ±r ve gÃ¼ncel veriler elde edilir.</h3>
					</section>
					<section>
						<p> CDC, log tabanlÄ± veya tablo tabanlÄ± yÃ¶ntemler kullanarak deÄŸiÅŸiklikleri takip eder. Log tabanlÄ± CDC, veritabanÄ±nÄ±n log dosyalarÄ±nÄ± analiz ederek deÄŸiÅŸiklikleri yakalar. Tablo tabanlÄ± CDC ise Ã¶zel olarak tasarlanmÄ±ÅŸ tablolar kullanarak deÄŸiÅŸiklikleri izler.</p>
					</section>
				</section>

				<section>
					<section>
						<h2>PostgreSQL ve CDC</h2>
						<br>
						<a href="#/2/1" class="navigate-down">
							<img class="r-frame" style="background: rgba(255,255,255,0.1);" width="178" height="238" data-src="https://static.slid.es/reveal/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h3>PostgreSQL'in kendisi doÄŸal olarak CDC Ã¶zelliÄŸi saÄŸlamaz. Ancak, PostgreSQL'in Write-Ahead Log (WAL) mekanizmasÄ±, CDC iÃ§in kullanÄ±labilir.</h3>
					</section>
					<section>
						<h4>PostgreSQL, yapÄ±lan deÄŸiÅŸiklikleri kaydetmek iÃ§in WAL mekanizmasÄ±nÄ± kullanÄ±r. CDC, bu WAL loglarÄ±nÄ± analiz ederek yapÄ±lan deÄŸiÅŸiklikleri yakalar ve hedef sistemlere aktarÄ±r.</h4>
					</section>
					<section>
						<h2>Ve Geldik Sunum Konumuza</h2>
						<h4>PostgreSQL iÃ§in Ã¼Ã§Ã¼ncÃ¼ taraf CDC eklentileri mevcuttur. Bu eklentiler, CDC iÅŸlemlerini kolaylaÅŸtÄ±rÄ±r ve PostgreSQL ile diÄŸer sistemler arasÄ±nda veri entegrasyonunu saÄŸlar. (Debezium, Londiste, Bucardo)</h4>
					</section>
				</section>

				<section>
					<section>
						<h2>Debezium</h2>
						<p><b>Debezium</b>'un TanÄ±mÄ± ve AmacÄ±</p>
						<br>
						<a href="#/2/1" class="navigate-down">
							<img class="r-frame" style="background: rgba(255,255,255,0.1);" width="178" height="238" data-src="https://static.slid.es/reveal/arrow.png" alt="Down arrow">
						</a>
					</section>
					<section>
						<h2>Debezium Nedir ?</h2>
					</section>
					<section>
						<h3>Debezium, aÃ§Ä±k kaynaklÄ± bir Change Data Capture(CDC) aracÄ±dÄ±r ve geniÅŸ bir kullanÄ±cÄ± topluluÄŸu tarafÄ±ndan desteklenir. Bu sayede, geliÅŸtirme sÃ¼reÃ§leri hÄ±zlanÄ±r ve kullanÄ±cÄ±lar arasÄ±nda deneyim paylaÅŸÄ±mÄ± saÄŸlanÄ±r</h3>
					</section>
					<section>
						<h4>Debezium, veritabanÄ±nda istenilen tabloda yahut o tablonun istenilen kolonlarÄ±nda olan tÃ¼m verisel deÄŸiÅŸiklikleri yakalayarak Kafkaâ€™ya aktarÄ±r. Bu deÄŸiÅŸiklikleri yakalama sÃ¼reci, Debeziumâ€™un Ã§alÄ±ÅŸmadÄ±ÄŸÄ± sÃ¼reÃ§lerde de pasif bir ÅŸekilde de gerÃ§ekleÅŸtirilebilmektedir.</h4>
					</section>
					<section>
						<img src="./examples/assets/shema-debezium.png" alt="" />						
					</section>
					<section>
						<h4>Debezium, veritabanÄ±ndaki deÄŸiÅŸiklikleri gerÃ§ek zamanlÄ± olarak takip eder ve bu deÄŸiÅŸiklikleri Ã§eÅŸitli formatlarda (JSON, Avro, Protobuf vb.) hedef sistemlere aktarÄ±r. Bu sayede, sistemler arasÄ±nda gÃ¼ncel ve doÄŸru veri akÄ±ÅŸÄ± saÄŸlanÄ±r.</h4>
					</section>
					<section>
						<h2>Peki bunlarÄ± nasÄ±l yapÄ±yor?</h2>
						<h5>VeritabanÄ±â€™nÄ±n transaction logâ€™unu okuyarak</h5>
						<h5>Debezium ile Kafka Connect ApÄ± yardÄ±mÄ± ile Kafka Topicâ€™e aktarÄ±lmasÄ±nÄ± saÄŸlamaktayÄ±z. Bu bize yakaladÄ±ÄŸÄ± verilerin dayanÄ±klÄ±lÄ±ÄŸÄ± ve gÃ¼venilirliÄŸini de saÄŸlamda yardÄ±mcÄ± olur.</h5>
					</section>
				</section>

				<section>
					<section>
						<h3>Åimdi demo uygulama Ã¼zerinden daha da ayrÄ±ntÄ±lara gireceÄŸiz</h3>
						<h4>Ama bu demoda kullandÄ±ÄŸÄ±mÄ±z toollara kÄ±sa bir Ã¶n bilgilendirme yapmak isterim</h4>
					</section>
					<section>
						<h4>Kafka Nedir</h4>
						<p>Binlerce yazÄ±lÄ±m projesi ve ÅŸirket tarafÄ±ndan kullanÄ±lan, publisher/subscriber tabanlÄ± olan open source distributed streaming platformudur. Temelde bilinmesi gereken Producer, Consumer, Broker ve Topic olmak Ã¼zere dÃ¶rt terminolojik terimi mevcuttur</p>
					</section>
					<section>
						<ul>
							<li>Producer, publisher rolÃ¼ndedir. Subscriberâ€™lara mesaj gÃ¶nderir.</li>
							<li>Consumer, subscriber rolÃ¼ndedir. Producerâ€™larÄ±n Ã¼rettiÄŸi mesajlarÄ± dinlemekte ve tÃ¼ketmektedir.</li>
							<li>Topic, Kafkaâ€™da mesajlarÄ±n tutulduÄŸu yapÄ±dÄ±r.</li>
							<li>Broker, Topicâ€™leri barÄ±ndÄ±ran sunuculardÄ±r.</li>
						</ul>
					</section>
					<section>
						<h5>Debezium ile veritabanÄ±nda yakalanan deÄŸiÅŸikliklerin Kafkaâ€™ya aktarÄ±labilmesi iÃ§in verilerin bunun anlayabileceÄŸi dilden bir formata dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi gerekmektedir. Bunun iÃ§in Kafka Connect toolâ€™unu kullanÄ±yor olacaÄŸÄ±z.</h5>
					</section>
					<section>
						<h4>Kafka Connect Nedir? </h4>
						<p>Kafkaâ€™nÄ±n veritabanlarÄ±na, consule yahut eleasticsearch gibi yapÄ±lara baÄŸlanabilmesini ve metrikleri alabilmesini saÄŸlayan bir toolâ€™dur. Hususi olarak iÃ§eriÄŸimiz Ã§erÃ§evesinde deÄŸerlendirirsek eÄŸer Kafka ile Debezium arasÄ±nda veri akÄ±ÅŸÄ±nÄ± saÄŸlayacak olan kÃ¶prÃ¼ gÃ¶revi gÃ¶ren yapÄ±lanmadÄ±r diyebiliriz.</p>					
					</section>
					<section>
						<h2>Son olarak ZooKeeper Nedir?</h2>
					</section>
					<section>
						<p>BirÃ§ok yapÄ±landÄ±rma bilgisinin, distributed mimariler tarafÄ±ndan ÅŸu veya bu ÅŸekilde kullanÄ±ldÄ±ÄŸÄ±nÄ± biliyoruz. Tabi bu bilgilerin yÃ¶netimi manuel bir ÅŸekilde yapÄ±ldÄ±ÄŸÄ± taktirde uygulanmalarÄ±nÄ±n zorluÄŸu nedeniyle insani durumlardan kaynaklÄ± hatalar kaÃ§Ä±nÄ±lmaz olabilmektedir</p>
					</section>
					<section>
						Hadi diyelim doÄŸru bir ÅŸekilde yÃ¶netildiler, bu sefer de uygulamalar daÄŸÄ±tÄ±ldÄ±ÄŸÄ±nda yÃ¶netim karmaÅŸasÄ± gibi durumlarla karÅŸÄ±laÅŸÄ±labilmektedir. Ä°ÅŸte ZooKeeper, tÃ¼m bu riskleri gÃ¶zardÄ± edip gÃ¼venilir distributed yapÄ±landÄ±rma yapmamÄ±zÄ± saÄŸlamaktadÄ±r.
					</section>
					<section>
						<p>Haliyle, Kafkaâ€™nÄ±n yapÄ±landÄ±rma bilgilerini depolamak, adlandÄ±rmak, senkronizasyonunu saÄŸlamak ve koordine etmek iÃ§in ZooKeeper yazÄ±lÄ±mÄ±nÄ± kullanÄ±yor olacaÄŸÄ±z</p>
						<h5>Debezium entegrasyonlarÄ±nda ZooKeeper, temel kurulum dÄ±ÅŸÄ±nda derinlemesine anlaÅŸÄ±lmayÄ± gerektirmemektedir.</h5>
					</section>
				</section>

				<section data-background-video="./examples/assets/demo.mp4">

				</section>
					
				

				
					<section>
						<h4>Debezium Ä°le PostgreSQLâ€™de Change Data Capture(CDC) NasÄ±l YapÄ±lÄ±r?</h4>
					</section>
					<section>
						<p>Ä°lk olarak Debeziumâ€™u hangi veritabanÄ±yla kullanÄ±rsak kullanalÄ±m temelde Kafka ve Debezium Ã§alÄ±ÅŸtÄ±rÄ±lmalÄ± ve ZooKeeper ile yapÄ±landÄ±rmalar ayarlanmalÄ±dÄ±r.</p>
						<p>TÃ¼m bu yazÄ±lÄ±mlarÄ±m ayaÄŸa kaldÄ±rÄ±lmasÄ± iÃ§in Dockerâ€™dan istifade ediyor olacaÄŸÄ±z. Åimdi gelin ihtiyacÄ±mÄ±z olan araÃ§larÄ± hÄ±zlÄ±ca oluÅŸturup, ayaÄŸa kaldÄ±ralÄ±m.</p>
					</section>
					
					<section data-auto-animate>
					<h2 data-id="code-title">docker-compose-postgres.yaml</h2>
					<pre data-id="code-animation"><code class="hljs cli" data-trim data-line-numbers>
						version: '3.1'
						services:
						zookeeper:
							image: debezium/zookeeper
							ports:
							- "2181:2181"
							- "2888:2888"
							- "3888:3888"
						kafka:
							image: debezium/kafka
							ports:
							- "9092:9092"
							- "29092:29092"
							depends_on:
							- zookeeper
							environment:
							- ZOOKEEPER_CONNECT=zookeeper:2181
							- KAFKA_ADVERTISED_LISTENERS=LISTENER_EXT://localhost:29092,LISTENER_INT://kafka:9092
							- KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=LISTENER_INT:PLAINTEXT,LISTENER_EXT:PLAINTEXT
							- KAFKA_LISTENERS=LISTENER_INT://0.0.0.0:9092,LISTENER_EXT://0.0.0.0:29092
							- KAFKA_INTER_BROKER_LISTENER_NAME=LISTENER_INT
						postgres:
							image: debezium/postgres
							ports:
							- 5432:5432
							environment:
							- POSTGRES_USER=postgres
							- POSTGRES_PASSWORD=123456
							- POSTGRES_DB=DebeziumDB
						connect:
							image: debezium/connect
							ports:
							- 8083:8083
							environment:
							- BOOTSTRAP_SERVERS=kafka:9092
							- GROUP_ID=1
							- CONFIG_STORAGE_TOPIC=my_connect_configs
							- OFFSET_STORAGE_TOPIC=my_connect_offsets
							- STATUS_STORAGE_TOPIC=my_connect_statuses
							depends_on:
							- zookeeper
							- kafka

					</code></pre>
					</section>
					<section>
						<p>Ã–nceki slide bulunan docker compose dosyasÄ±na bakarsanÄ±z eÄŸer ihtiyaÃ§ doÄŸrultusundaki ilgili tÃ¼m araÃ§larÄ± barÄ±ndÄ±rmaktadÄ±r. TÃ¼m imageâ€™lar da debeziumâ€™lu versiyonlarÄ± kullanmamÄ±zÄ±n nedeni debezium ile Ã§alÄ±ÅŸmalarÄ± iÃ§in gerekli ayarlarÄ±nÄ±n etkin gelmesindendir.</p>
					</section>
					<section>
						<p>PostgreSQLâ€™de ise debeziumâ€™un saÄŸlÄ±klÄ± Ã§alÄ±ÅŸabilmesi iÃ§in wal_level konfigÃ¼rasyonuna â€˜logicalâ€™ deÄŸeri verilmelidir.</p>
						<p>Bunun nedeni, PostgreSQLâ€™de herhangi bir transaction yÃ¼rÃ¼tÃ¼ldÃ¼ÄŸÃ¼nde Ã¶ncelikle bu iÅŸlem Write-ahead logging(WAL) adÄ± verilen yerde gerÃ§ekleÅŸtirilmektedir. Debeziumâ€™da gerekli verileri WALâ€™dan toplayacaÄŸÄ± iÃ§in bu ÅŸekilde ayarlanmasÄ± gerekmektedir</p>
					</section>
					<section>
						<p>Haliyle debezium/postgres bu konfigÃ¼rasyon temellerinde gelmektedir. Åimdi PostgreSQL sunucusunun yapÄ±landÄ±rmalarÄ±na bir gÃ¶z atÄ±p Ã¶yle devam edelim.</p>
					</section>
					<section>
						<img src="./examples/assets/debeziumdemo1.png" alt="" />
						<h4>Logical, WAL verilerini harici sistemlerin tÃ¼ketebilmesi iÃ§in gerekli izin konfigÃ¼rasyonunu saÄŸlar.</h4>
					</section>
					<section data-auto-animate>
						<h2 data-id="code-title">Pretty Code</h2>
						<pre data-id="code-animation"><code class="hljs cli" data-trim data-line-numbers>
							docker-compose -f docker-compose-postgres.yaml up
						</code></pre>
						<p>Åimdi bu docker compose dosyasÄ±nÄ± bu talimat eÅŸliÄŸinde Ã§alÄ±ÅŸtÄ±ralÄ±m.</p>
					</section>
					<section>
						<img src="./examples/assets/debeziumdemo2.png" alt="" />
						<h3>TÃ¼m yÃ¼klemelerin bitip, containerâ€™larÄ±n ayaÄŸa kaldÄ±rÄ±ldÄ±ÄŸÄ±ndan emin olalÄ±m.</h3>
					</section>
					<section data-auto-animate>
						<h2 data-id="code-title">Pretty Code</h2>
						<pre data-id="code-animation"><code class="hljs cli" data-trim data-line-numbers>
							create  schema exampleschema
							set search_path TO exampleschema,public;
							create table exampleschema.exampletable (
								column1 int,
								column2 int,
								column3 varchar(150),
								primary key(column1)
							);
							alter table exampleschema.exampletable replica identity FULL;
							insert into exampleschema.exampletable values (1000, 2000, 'example value');
							insert into exampleschema.exampletable values (1001, 2001, 'example value 2');
						</code></pre>
						<small>PostgreSQL sunucusunda yukarÄ±daki docker-compose-postgres.yaml dosyasÄ±nda oluÅŸturulan â€˜DebeziumDBâ€™ veritabanÄ± iÃ§erisinde aÅŸaÄŸÄ±daki Ã¶rnek tabloyu ve ÅŸemayÄ± oluÅŸturalÄ±m ve ardÄ±ndan Ã¶rnek bir kaÃ§ veri insert edelim.</small>
					</section>
					<section>
						<p>Åimdi ise debezzium connectorâ€™Ä±n bizlere sunmuÅŸ olduÄŸu API aracÄ±lÄ±ÄŸÄ±yla dinlenecek olan veritabanÄ± ve tablo bilgilerinin verilmesi gerekmektedir. Bunun iÃ§in sonraki slaytdaki gibi bir .json dosyasÄ± oluÅŸturarak gerekli bilgileri iÃ§erisinde tanÄ±mlamamÄ±z gerekmektedir.</p>
					</section>
					<section data-auto-animate>
						<h2 data-id="code-title">register-postgres.json</h2>
						<pre data-id="code-animation"><code class="hljs json" data-trim data-line-numbers>
							{
								"name": "example-connector",
								"config": {
									"connector.class": "io.debezium.connector.postgresql.PostgresConnector",
									"tasks.max": "1",
									"database.hostname": "postgres",
									"database.port": "5432",
									"database.user": "postgres",
									"database.password": "123456",
									"database.dbname" : "DebeziumDB",
									"database.server.name": "exampleserver",
									"schema.include.list": "exampleschema",
									"table.whitelist": "exampleschema.exampletable"
								}
							}
						</code></pre>
					</section>
					<section data-auto-animate>
						<h2 data-id="code-title">Pretty Code</h2>
						<pre data-id="code-animation"><code class="hljs cli" data-trim data-line-numbers>
							curl -i -X POST -H "Accept:application/json" -H "Content-Type:application/json" http://localhost:8083/connectors/ -d @register-postgres.json
						</code></pre>
						<p>Curl Ã¼zerinden yukarÄ±daki post isteÄŸini gÃ¶ndermemiz yeterlidir.</p>
					</section>
					<section>
						<img src="./examples/assets/debeziumdemo3.png" alt="" />
						<p>BÃ¶ylece bu son hamle eÅŸliÄŸinde bir connector tanÄ±mlayarak debeziumâ€™u etkinleÅŸtirmiÅŸ bulunmaktayÄ±z. Connectorâ€™Ä± etkinleÅŸtirme neticesinde yukarÄ±daki gÃ¶rselde tek satÄ±r halinde gelen resultâ€™Ä± doÄŸru dÃ¼zgÃ¼n gÃ¶rmek isteyenler iÃ§in formatlandÄ±rÄ±p aÅŸaÄŸÄ± slayta bÄ±rakÄ±yorum;</p>				
					</section>
					<section data-auto-animate>
						<h2 data-id="code-title">Pretty Code</h2>
						<pre data-id="code-animation"><code class="hljs cli" data-trim data-line-numbers>
							{
								"name":"example-connector",
								"config":{
								   "connector.class":"io.debezium.connector.postgresql.PostgresConnector",
								   "tasks.max":"1",
								   "database.hostname":"postgres",
								   "database.port":"5432",
								   "database.user":"postgres",
								   "database.password":"123456",
								   "database.dbname":"DebeziumDB",
								   "database.server.name":"exampleserver",
								   "schema.include.list":"exampleschema",
								   "table.whitelist":"exampleschema.exampletable",
								   "name":"example-connector"
								},
								"tasks":[
									
								],
								"type":"source"
							 }
						</code></pre>
						<p>Connectorâ€™Ä± etkinleÅŸtirme neticesinde result</p>
					</section>
					<section data-auto-animate>
						<pre data-id="code-animation"><code class="hljs cli" data-trim data-line-numbers>
							docker-compose -f docker-compose-postgres.yaml exec kafka /kafka/bin/kafka-console-consumer.sh --bootstrap-server kafka:9092 --from-beginning --property print.key=true --topic exampleserver.exampleschema.exampletable						</code></pre>
						<p>Ve ÅŸimdi ise debezium connector ile takip edilen veritabanÄ± sunucusundaki ilgili tablodaki veri deÄŸiÅŸikliklerinin izlemesini gerÃ§ekleÅŸtirelim. Bunun iÃ§in yukarÄ±daki docker talimatÄ±nÄ±n verilmesi yeterlidir.</p>
					</section>
					<section>
						<img src="./examples/assets/debeziumdemo4.png" alt="" />
						<small>Evet, gÃ¶rÃ¼ldÃ¼ÄŸÃ¼ Ã¼zere PostgreSQL veritabanÄ±ndaki yapÄ±lan deÄŸiÅŸiklikler yakalanmÄ±ÅŸ bulunmaktadÄ±r. Hatta debezium connector baÄŸlanmadan Ã¶nce girilen Ã¶rnek veriler bile Ã¶nceki paragraflarda bildirildiÄŸi Ã¼zere debezium Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ktan sonra yakalanmÄ±ÅŸ ve elde edilmiÅŸtir</small>
					</section>
					<section>
						<h3>Åimdi gelen json verileri dÃ¼zgÃ¼n formata getirip, inceleyelim.</h3>
						<h5>Bu kÄ±sÄ±m aslÄ±nda demo'muzun en Ã¶nemli kÄ±smÄ±</h5>
					</section>
					<section data-auto-animate>
						<pre data-id="code-animation"><code class="hljs json" data-trim data-line-numbers>
							{
								"schema":{
								   "type":"struct",
								   "fields":[
									  {
										 "type":"int32",
										 "optional":false,
										 "field":"column1"
									  }
								   ],
								   "optional":false,
								   "name":"exampleserver.exampleschema.exampletable.Key"
								},
								"payload":{
								   "column1":1000
								}
							 }{
								"schema":{
								   "type":"struct",
								   "fields":[
									  {
										 "type":"struct",
										 "fields":[
											{
											   "type":"int32",
											   "optional":false,
											   "field":"column1"
											},
											{
											   "type":"int32",
											   "optional":true,
											   "field":"column2"
											},
											{
											   "type":"string",
											   "optional":true,
											   "field":"column3"
											}
										 ],
										 "optional":true,
										 "name":"exampleserver.exampleschema.exampletable.Value",
										 "field":"before"
									  },
									  {
										 "type":"struct",
										 "fields":[
											{
											   "type":"int32",
											   "optional":false,
											   "field":"column1"
											},
											{
											   "type":"int32",
											   "optional":true,
											   "field":"column2"
											},
											{
											   "type":"string",
											   "optional":true,
											   "field":"column3"
											}
										 ],
										 "optional":true,
										 "name":"exampleserver.exampleschema.exampletable.Value",
										 "field":"after"
									  },
									  {
										 "type":"struct",
										 "fields":[
											{
											   "type":"string",
											   "optional":false,
											   "field":"version"
											},
											{
											   "type":"string",
											   "optional":false,
											   "field":"connector"
											},
											{
											   "type":"string",
											   "optional":false,
											   "field":"name"
											},
											{
											   "type":"int64",
											   "optional":false,
											   "field":"ts_ms"
											},
											{
											   "type":"string",
											   "optional":true,
											   "name":"io.debezium.data.Enum",
											   "version":1,
											   "parameters":{
												  "allowed":"true,last,false,incremental"
											   },
											   "default":"false",
											   "field":"snapshot"
											},
											{
											   "type":"string",
											   "optional":false,
											   "field":"db"
											},
											{
											   "type":"string",
											   "optional":true,
											   "field":"sequence"
											},
											{
											   "type":"string",
											   "optional":false,
											   "field":"schema"
											},
											{
											   "type":"string",
											   "optional":false,
											   "field":"table"
											},
											{
											   "type":"int64",
											   "optional":true,
											   "field":"txId"
											},
											{
											   "type":"int64",
											   "optional":true,
											   "field":"lsn"
											},
											{
											   "type":"int64",
											   "optional":true,
											   "field":"xmin"
											}
										 ],
										 "optional":false,
										 "name":"io.debezium.connector.postgresql.Source",
										 "field":"source"
									  },
									  {
										 "type":"string",
										 "optional":false,
										 "field":"op"
									  },
									  {
										 "type":"int64",
										 "optional":true,
										 "field":"ts_ms"
									  },
									  {
										 "type":"struct",
										 "fields":[
											{
											   "type":"string",
											   "optional":false,
											   "field":"id"
											},
											{
											   "type":"int64",
											   "optional":false,
											   "field":"total_order"
											},
											{
											   "type":"int64",
											   "optional":false,
											   "field":"data_collection_order"
											}
										 ],
										 "optional":true,
										 "field":"transaction"
									  }
								   ],
								   "optional":false,
								   "name":"exampleserver.exampleschema.exampletable.Envelope"
								},
								"payload":{
								   "before":null,
								   "after":{
									  "column1":1000,
									  "column2":2000,
									  "column3":"example value"
								   },
								   "source":{
									  "version":"1.8.1.Final",
									  "connector":"postgresql",
									  "name":"exampleserver",
									  "ts_ms":1647763176365,
									  "snapshot":"true",
									  "db":"DebeziumDB",
									  "sequence":"[null,\"23723656\"]",
									  "schema":"exampleschema",
									  "table":"exampletable",
									  "txId":557,
									  "lsn":23723656,
									  "xmin":null
								   },
								   "op":"r",
								   "ts_ms":1647763176368,
								   "transaction":null
								}
							 }
						</code></pre>
					</section>
					<section>
						<p>YukarÄ±daki json datayÄ± incelerseniz eÄŸer 177 ile 200. satÄ±r aralÄ±ÄŸÄ±nda deÄŸiÅŸiklik olan verileri iÃ§eren â€˜payloadâ€™ alanÄ± mevcuttur.</p>
						<p>Yakalanan verilerin hangi aksiyona tabii tutulduÄŸunu 198. satÄ±rdaki â€˜opâ€™ alanÄ±ndaki c, u, d ve r deÄŸerleri ifade etmektedir.</p>
					</section>
					<section>
						<ol>
							<li>c Yakalanan verinin eklendiÄŸini ifade eder.</li>
							<li>u Yakalanan verinin gÃ¼ncellendiÄŸini ifade eder.</li>
							<li>d Yakalanan verinin silindiÄŸini ifade eder.</li>
							<li>r Yakalanan verinin zaten var olduÄŸunu ifade eder.</li>
						</ol>
					</section>
					<section>
						<h5>Gelen json dataâ€™da ki diÄŸer alanlar ne?</h5>
						<ul>
							<li>schema; takip edilen tablonun yapÄ±sÄ± ve kolonlarla ilgili bilgiler taÅŸÄ±yan kÄ±sÄ±mdÄ±r</li>
							<li>payload; yukarÄ±da gÃ¶rÃ¼dÃ¼ÄŸÃ¼mÃ¼z Ã¼zere deÄŸiÅŸiklikler neticesinde akan verilere dair bilgi veren kÄ±sÄ±mdÄ±r.</li>
							<li>before; deÄŸiÅŸiklik olan verilerin, deÄŸiÅŸiklik olmadan Ã¶nceki hallerini taÅŸÄ±yan kÄ±sÄ±mdÄ±r. Insert haricinde update ve delete sorgularÄ±nda dolu gelmektedir.</li>
							<li>after; deÄŸiÅŸiklik olan verilerdeki son deÄŸerleri veren kÄ±sÄ±mdÄ±r. Delete hariÃ§ diÄŸer sorgularda dolu gelmektedir.</li>
						</ul>
					</section>
					<section data-auto-animate>
							<pre data-id="code-animation"><code class="hljs json" data-trim data-line-numbers>
								update exampleschema.exampletable
								set
								column1 = 5000,
								column2 = 6000,
								column3 = 'updated example value'
								where column1 = 1000
								</code></pre>
								<p>Åimdi test amaÃ§lÄ± yukarÄ±daki veritabanÄ± sorgularÄ±nÄ± Ã§alÄ±ÅŸtÄ±ralÄ±m.
								</p>
					</section>
					<section>
						<img src="./examples/assets/debeziumdemo5.png" alt="" />
						<small>GÃ¶rÃ¼ldÃ¼ÄŸÃ¼ Ã¼zere Ã§alÄ±ÅŸtÄ±rÄ±lan sorgu update sorgusu ise veritabanÄ± aÃ§Ä±sÄ±ndan bu bir delete ve insert iÅŸlemi olduÄŸu iÃ§in Ã¶nce â€˜opâ€™ deÄŸeri â€˜dâ€™ sonra da â€˜câ€™ olan iki kayÄ±t yakalanmaktadÄ±r. Haliyle â€˜beforeâ€™ ve â€˜afterâ€™ alanlarÄ±ndan update yapÄ±lan sorguya dair verileri rahatlÄ±kla yakalayabilmekteyiz.</small>
					</section>
					<section>
						<h3>BÃ¶ylece PostgreSQL ile CDC Ã§alÄ±ÅŸmasÄ±nÄ± gerÃ§ekleÅŸtirmiÅŸ olduk. Mevzu bahis, Debezium ile yakalanan verilerin Kafka Ã¼zerinden .NET Core ortamÄ±nda okunmasÄ±na geldi </h3>
					</section>
					<section>
						<section>
							<h3>Bunun iÃ§in aÅŸaÄŸÄ±daki gibi Confluent.Kafka kÃ¼tÃ¼phanesini kullanarak basit bir consumer oluÅŸturabiliriz.</h3>
						</section>
						<section data-auto-animate>
							<pre data-id="code-animation"><code class="hljs c#" data-trim data-line-numbers>
								using Confluent.Kafka;
 
								ConsumerConfig config = new()
								{
									GroupId = "exampleserver.exampleschema.exampletable",
									BootstrapServers = "localhost:29092",
									AutoOffsetReset = AutoOffsetReset.Earliest,
								 
								};
								 
								using IConsumer< Ignore, string> consumer = new ConsumerBuilder< Ignore, string>(config).Build();
								consumer.Subscribe("exampleserver.exampleschema.exampletable");
								 
								CancellationTokenSource source = new CancellationTokenSource();
								Console.CancelKeyPress += (_, e) =>
								{
									e.Cancel = true;
									source.Cancel();
								};
								while (true)
								{
									ConsumeResult< Ignore, string> result = consumer.Consume(source.Token);
									Console.WriteLine($"Topic Name : {result.TopicPartitionOffset}");
									Console.WriteLine($"Message : {result.Value}");
								}										
								</code></pre>
						</section>
					</section>
					<section data-background-iframe="https://debezium.io/" data-background-interactive>
						<div style="position: absolute; width: 40%; right: 0; box-shadow: 0 1px 4px rgba(0,0,0,0.5), 0 5px 25px rgba(0,0,0,0.2); background-color: rgba(0, 0, 0, 0.9); color: #fff; padding: 20px; font-size: 20px; text-align: left;">
							<h2>Debezium Documentation</h2>
						</div>
					</section>
					<section>
						<h2>TeÅŸekkÃ¼rler ğŸ‰</h2>
					</section>
				




			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
